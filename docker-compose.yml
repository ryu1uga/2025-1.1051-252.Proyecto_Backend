services:
  order-user-service:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8000:80"
    environment:
      ConnectionStrings__DefaultConnection: "Host=dpg-d4in34shg0os73a25940-a.oregon-postgres.render.com;Database=loop_db_5eo6;Username=loop;Password=jB5x5grx0csPwY1fFvds68tDqSK0IRG7"
    volumes:
      - ./logs:/app/Logs

  product-service:
    build:
      context: ./ProductService 
      dockerfile: Dockerfile 
    ports:
      - "8001:80" # Nuevo puerto para este servicio
    environment:
      # Usar la variable de contrase√±a para la DB del producto
      ConnectionStrings__ProductConnection: "Host=dpg-d4in8hh5pdvs738423b0-a.oregon-postgres.render.com;Database=loop_db_products;Username=loop;Password=pUCV1znJnEsjYddxYOHmx8uhnlvNVCUo"
      # La clave JWT debe ser la misma en ambos servicios
      Jwt__Key: "c1b63ad474f840989094c0a96386711f6b75797eaf67d9fa3c2405750359db2cfc3cbb58dbccea65e607411ff34bb79c5e78ad274bdb86b7613abf479b3dd43d"

volumes:
  postgres_data: